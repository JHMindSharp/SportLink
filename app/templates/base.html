<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}SportLink{% endblock %}</title>
    <link rel="icon" href="{{ url_for('static', filename='images/favicon.ico') }}" type="image/x-icon">
    <meta name="csrf-token" content="{{ csrf_token() }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/global.css') }}">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">
    <script src="{{ url_for('static', filename='js/scripts.js') }}"></script>
    {% block extra_head %}{% endblock %}
</head>
<body>

{% if not current_user.is_authenticated %}
    <!-- NAVBAR standard (non connecté) -->
    <header class="header">
        <div class="header-container">
            <!-- Titre centré dans la navbar -->
            <div class="nav-title">SportLink</div>
            <!-- On peut ajouter des liens si besoin (ex: Connexion / Inscription) -->
        </div>
    </header>

{% else %}
    <!-- NAVBAR pour utilisateur connecté
         On la place ici, toujours en haut de la page,
         ou alors on pourrait faire en sorte qu'elle soit "en bas de la couverture".
         Dans ce snippet, on la laisse en haut mais
         on pourrait ajuster en jouant avec margin ou position: absolute.
    -->
    <header class="header">
        <div class="header-container">
            <!-- Logo à gauche, si souhaité -->
            <a href="{{ url_for('news_feed.news_feed') }}" class="logo-container">
                <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Logo SportLink">
            </a>
            <!-- Menu -->
            <nav class="nav">
                <ul class="menu">
                    <li><a href="{{ url_for('news_feed.news_feed') }}">Fil d'actualité</a></li>
                    <li><a href="{{ url_for('profile.profile') }}">Mon Profil</a></li>
                    <!-- 
                       On place la photo de profil par-dessus la navbar 
                       via z-index plus tard sur la page Profile 
                       On laisse juste la place ici 
                    -->
                    <li><a href="{{ url_for('messages.inbox') }}">Messages</a></li>
                    <li><a href="{{ url_for('notifications.list_notifications') }}">Notifications</a></li>
                    <li><a href="{{ url_for('events.organize') }}">Organiser</a></li>
                    <li><a href="{{ url_for('profile.list_friends') }}">Amis</a></li>
                    <li><a href="{{ url_for('auth.logout') }}">Déconnexion</a></li>
                </ul>
            </nav>
        </div>
    </header>
{% endif %}

<main class="main-content">
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="flash-messages">
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}" role="alert">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
</main>

<footer>
    <p>&copy; 2025 SportLink. Tous droits réservés.</p>
</footer>

<div class="social-links">
    <a href="https://www.garmin.com" target="_blank">
        <img src="{{ url_for('static', filename='images/garmin.png') }}" alt="Garmin" class="social-icon">
    </a>
    <a href="https://www.facebook.com" target="_blank">
        <img src="{{ url_for('static', filename='images/facebook.png') }}" alt="Facebook" class="social-icon">
    </a>
    <a href="https://www.strava.com" target="_blank">
        <img src="{{ url_for('static', filename='images/strava.png') }}" alt="Strava" class="social-icon">
    </a>
    <a href="https://www.zwift.com" target="_blank">
        <img src="{{ url_for('static', filename='images/zwift.png') }}" alt="Zwift" class="social-icon">
    </a>
</div>

{% block extra_scripts %}{% endblock %}
</body>
</html>
