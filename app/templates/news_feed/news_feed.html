{% extends "base.html" %}

{% block title %}Fil d'actualité - SportLink{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/profile_view.css') }}">
{% endblock %}

{% block content %}
{% if current_user.is_authenticated %}
  {% include '_layout/logged_in_top.html' %}
{% endif %}

<div class="profile-main">
    <h2>Fil d'actualité</h2>
    <div class="news-feed-posts">
        {% for post in posts %}
        <div class="news-post-card">
            <div class="post-header">
                <img src="{{
                    url_for('main.uploaded_file', filename=post.author.profile_image or 'profiles/default_profile.jpg')
                }}" alt="Photo profil" />
                <div class="post-author-info">
                    <strong>{{ post.author.first_name }} {{ post.author.last_name }}</strong>
                    <span class="timestamp">{{ post.created_at.strftime('%d %B %Y à %H:%M') }}</span>
                </div>
            </div>
            <div class="post-content">
                {% if post.title %}
                <h3>{{ post.title }}</h3>
                {% endif %}
                <p>{{ post.content }}</p>
                
                {% if post.image %}
                <img src="{{ url_for('main.uploaded_file', filename=post.image) }}" alt="image publication" />
                {% endif %}
                
                {% if post.video %}
                <video controls>
                    <source src="{{ url_for('main.uploaded_file', filename=post.video) }}">
                </video>
                {% endif %}
                
                {% if post.music %}
                <audio controls>
                    <source src="{{ url_for('main.uploaded_file', filename=post.music) }}">
                </audio>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
